--- a/net/mac80211/rc80211_minstrel_ht.c
+++ b/net/mac80211/rc80211_minstrel_ht.c
@@ -673,9 +673,10 @@
 	struct sta_info *sta = container_of(pubsta, struct sta_info, sta);
 	u16 tid;
 
+#ifndef CPTCFG_WLAN_VENDOR_RWNX
 	if (skb_get_queue_mapping(skb) == IEEE80211_AC_VO)
 		return;
-
+#endif
 	if (unlikely(!ieee80211_is_data_qos(hdr->frame_control)))
 		return;
 
@@ -1210,6 +1211,7 @@
 			ldpc = true;
 	}
 
+#ifdef CPTCFG_WLAN_VENDOR_RWNX
 	if (ht_cap & IEEE80211_HT_CAP_LDPC_CODING) {
 		if (use_vht) {
 			if (vht_cap->cap & IEEE80211_VHT_CAP_RXLDPC)
@@ -1218,6 +1220,10 @@
 			mi->tx_flags |= IEEE80211_TX_CTL_LDPC;
 		}
 	}
+#else
+	if (ht_cap & IEEE80211_HT_CAP_LDPC_CODING)
+		mi->tx_flags |= IEEE80211_TX_CTL_LDPC;
+#endif
 
 	mi->tx_flags |= stbc << IEEE80211_TX_CTL_STBC_SHIFT;
 	if (ldpc)
--- a/net/mac80211/Kconfig
+++ b/net/mac80211/Kconfig
@@ -312,6 +312,10 @@
 	bool "Enable mac80211's private ioctl function, this is add by siflower"
     depends on MAC80211
 
+config WLAN_VENDOR_RWNX
+	bool "Enable rwnx macro in mac80211, this is add by siflower"
+    depends on MAC80211
+
 config MAC80211_STA_HASH_MAX_SIZE
 	int "Station hash table maximum size" if MAC80211_DEBUG_MENU
 	default 0
